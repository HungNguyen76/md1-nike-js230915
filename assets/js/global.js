let listProductsStock = [
    {
        img: "../assets/images/productItems/MEN/jordan-nu-retro-1-low.webp",
        name: "Jordan Nu Retro 1 Low",
        price: 3089000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jordan-nu-retro-1-low.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jordan-nu-retro-1-low-red.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/air-jordan-1-mid-shoes-SQf7DM.jpeg",
        name: "Air Jordan 1 Mid Shoes",
        price: 3669000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-shoes-SQf7DM.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-shoes-SQf7DM.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/air-jordan-1-mid-se.webp",
        name: "Air Jordan 1 Mid SE",
        price: 3959000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-se.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-se.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/jordan-one-take-4-pf-shoes-v5trdl.jpeg",
        name: "Jordan One Take 4 Pf",
        price: 2929000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jordan-one-take-4-pf-shoes-v5trdl.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jordan-one-take-4-pf-shoes-v5trdl.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/jordan-series-es.webp",
        name: "Jordan Series ES",
        price: 2499000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jordan-series-es.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jordan-series-es.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/jumpman-mvp.webp",
        name: "Jumpman MVP",
        price: 4849000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jumpman-mvp.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jumpman-mvp.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low.webp",
        name: "AIR JORDAN 1 ELEVATE LOW",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
        name: "AIR JORDAN 1 ELEVATE LOW",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-low-se-shoes-Mzkmv0.jpeg",
        name: "AIR JORDAN 1 LOW SE",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-low-se-shoes-Mzkmv0.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-low-shoes-459b4T.jpeg",
        name: "AIR JORDAN 1 LOW SE",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-low-shoes-459b4T.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-low-shoes-459b4T.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/jordan-nu-retro-1-low.webp",
        name: "Jordan Nu Retro 1 Low",
        price: 3089000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jordan-nu-retro-1-low.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jordan-nu-retro-1-low-red.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/air-jordan-1-mid-shoes-SQf7DM.jpeg",
        name: "Air Jordan 1 Mid Shoes",
        price: 3669000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-shoes-SQf7DM.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-shoes-SQf7DM.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/air-jordan-1-mid-se.webp",
        name: "Air Jordan 1 Mid SE",
        price: 3959000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-se.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/air-jordan-1-mid-se.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/jordan-one-take-4-pf-shoes-v5trdl.jpeg",
        name: "Jordan One Take 4 Pf",
        price: 2929000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jordan-one-take-4-pf-shoes-v5trdl.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jordan-one-take-4-pf-shoes-v5trdl.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/jordan-series-es.webp",
        name: "Jordan Series ES",
        price: 2499000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jordan-series-es.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jordan-series-es.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/MEN/jumpman-mvp.webp",
        name: "Jumpman MVP",
        price: 4849000,
        type: "MEN",
        options: [
            {
                src: "../assets/images/productItems/MEN/jumpman-mvp.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/MEN/jumpman-mvp.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low.webp",
        name: "AIR JORDAN 1 ELEVATE LOW",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low.webp",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
        name: "AIR JORDAN 1 ELEVATE LOW",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-low-se-shoes-Mzkmv0.jpeg",
        name: "AIR JORDAN 1 LOW SE",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-low-se-shoes-Mzkmv0.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-elevate-low-se-shoes-rk6X6b.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    },
    {
        img: "../assets/images/productItems/WOMEN/air-jordan-1-low-shoes-459b4T.jpeg",
        name: "AIR JORDAN 1 LOW SE",
        price: 4849000,
        type: "WOMEN",
        options: [
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-low-shoes-459b4T.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            },
            {
                src: "../assets/images/productItems/WOMEN/air-jordan-1-low-shoes-459b4T.jpeg",
                sizes: [
                    {
                        key: "S",
                        stock: 10
                    },
                    {
                        key: "M",
                        stock: 10
                    },
                    {
                        key: "L",
                        stock: 10
                    }
                ]
            }
        ]
    }
]

function uuid() {
    return new Date().getMilliseconds() + Math.floor(Math.random() * 999999999)
}

let listUsers = JSON.parse(localStorage.getItem("listUsers")) || []

console.log("listUsers: ", listUsers)
/*listUsers.push({
    idUser: uuid(),
    email: "admin@gmail.com",
    password: "123456",
    password_confirmation: "123456",
    cartUser: [],
    isAdmin: true
})*/
localStorage.setItem("listUsers", JSON.stringify(listUsers))

//Duyệt mảng listProductsStock để thêm id cho từng product (uuid()) và thêm quantity, gán = 1
listProductsStock.forEach(item => {
    item.id = uuid();
    item.quantity = 1;
})

//Duyệt mảng listProductsStock và duyệt tiếp mảng options để thêm idOption (uuid)
listProductsStock.forEach(item => {
    item.options.forEach(option => option.idOption = uuid())
})

console.log("listProductStock: ", listProductsStock)
//setItem => key là "listProducts" đưa listProductsStock vào localstorage
localStorage.setItem("listProducts", JSON.stringify(listProductsStock))


//B1: tao ham renderListProduct(params) {}
//B2: tạo biến result = ""
//B3: loops mảng params và gán vào biến result nội dung sử dụng cú pháp template string
//B4: nội dung template string như sau:
/*
* <div class="">
    <div class="">
    *  <img />
    * </div>
    <div>
    *  <div>
            <span>params[i].type}</span>
            * <span>S-M-L</span>
            * </div>
            <h4>param[i].name<h4>
            * <p>price</p>
* sử dụng querySelector gán innerHTML = result
* css cho thẻ content-container = flex, display none
*
* */
const USDollar = new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD'
})
const VND = new Intl.NumberFormat('vi-VN', {
    style: 'currency',
    currency: 'VND'
})

//Hàm hiển thị danh sách sản phẩm
function renderListProduct(params) {
    let result = ""
    for (let i = 0; i < params.length; i++) {
        result += `
         <div class="product-item">
            <div class="product-image">
                <img src="${params[i].img}" alt="product1"/>
            </div>
            <div class="product-description">
                <div class="product-type">
                    <span>${params[i].type}</span>
                    <span>S-M-L</span>
                </div>
                <h4 class="product-name">${params[i].name}</h4>
                <p>${VND.format(params[i].price)}</p>
            </div>
         </div>
        `
    }
    document.querySelector(".content-container").innerHTML = result;
    document.querySelector(".content-container").style.display = "flex"
    document.querySelector(".banner-container").style.display = "none"
}
function renderListAllProducts() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"))
    renderListProduct(listProducts)
    document.querySelector(".listPage").style.display = "block"
    pagination()
}
function renderMenListProduct() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"))
    let listProductsMen = []
    for (let i = 0; i < listProducts.length; i++) {
        if (listProducts[i].type == "MEN") {
            listProductsMen.push(listProducts[i])
        }
    }
    renderListProduct(listProductsMen)
    document.querySelector(".listPage").style.display = "none"
}
function renderWomenListProduct() {
    let listProducts = JSON.parse(localStorage.getItem("listProducts"))
    let listProductsWomen = []
    for (let i = 0; i < listProducts.length; i++) {
        if (listProducts[i].type == "WOMEN") {
            listProductsWomen.push(listProducts[i])
        }
    }
    renderListProduct(listProductsWomen)
    document.querySelector(".listPage").style.display = "none"
}

//B1. Tạo hàm phân trang (pagination)
//B2. khởi tạo biến thisPage (trang hiện tại), biến limit (number), biên list (querySelectorAll(".product-item"))
//B3. tạo hàm loadItem(): chứa 2 biến beginGet (limit * (thisPage -1)), endGet (limit * thisPage - 1)
//B3.1 vòng lặp for mảng list (forEach nhận vào 2 tham số) bên trong vòng lặp check if (key >= beginGet && key <= endGet)
//B3.1 => item.style.display = "block" còn không thì none và gọi hàm listPage()
//B4 tạo hàm listPage(), tạo biến count =  độ dài của mảng list / limit và được làm tròn lên
//B4.1 check nếu thisPage != 1
  //B4.1.1 tạo biến prev = document.createElement('li')
  //B4.1.2 tạo nội dung innerText cho biến prev gán = 'PREV'
  //B4.1.3 setAttribute cho prev sự kiện 'onclick', value là "changePage(" + (thisPage - 1) + ")"
  //B4.1.4 appendChild(prev) cho class ".listPage"
//B4.2 vòng lặp for mảng count
   //B4.2.1 tạo biên newPage = createElement("li")
   //B4.2.2 gán newPage.innerText = i
   //B4.2.3 check nếu i == thisPage thì thêm classList ('active')
   //B4.2.4 setAttribute cho newPage sự kiện onclick , giá trị là hàm "changePage(" + (thisPage + 1) + ")"
   //B4.2.5 querySelector class .listPage để appendChild(newPage)
//B4.3 check nếu thisPage khác count thì
   //B4.3.1 tạo bién next, gán thêm phần tử "li"
   //B4.3.2 next.innerText = 'NEXT'
   //B4.3.3 setAttribute cho next sự kiện onclick hàm "changePage(" + (thisPage + 1) + ")"
   //B4.3.4 querySelector listPage để appendChild(next)

//B5 tạo hàm changePage(i) xử lý gán thisPage = i
//B5.1 gọi hàm loadItem()
//B6 đính kèm hàm changePage vào global object -> window.changePage = changePage

//ham phan trang
function pagination() {
    let thisPage = 1;
    let limit = 8;
    let list = document.querySelectorAll(".product-item")

    function loadItem() {
        let beginGet = limit * (thisPage - 1 )
        let endGet = limit * thisPage - 1
        list.forEach((item, key) => {
            if(key >= beginGet && key <= endGet) {
                item.style.display = "block"
            } else {
                item.style.display = "none"
            }
        })
        listPage()
    }
    loadItem()

    function listPage() {
        let count = Math.ceil(list.length / limit)
        document.querySelector('.listPage').innerHTML = ''

        if(thisPage != 1) {
            let prev = document.createElement("li")
            prev.innerText = 'PREV'
            prev.setAttribute('onclick', "changePage(" + (thisPage - 1) + ")")
            document.querySelector('.listPage').appendChild(prev)
        }
        for(let i = 1; i <= count; i++) {
            let newPage = document.createElement("li")
            newPage.innerText = i;
            if(i == thisPage) {
                newPage.classList.add('active')
            }
            newPage.setAttribute('onclick', "changePage(" + i + ")")
            document.querySelector(".listPage").appendChild(newPage)
        }
        if(thisPage != count) {
            let next = document.createElement("li")
            next.innerText = 'NEXT'
            next.setAttribute("onclick", "changePage(" + (thisPage + 1 ) + ")")
            document.querySelector('.listPage').appendChild(next)
        }
    }
    function changePage(i) {
        thisPage = i
        loadItem()
    }
    window.changePage = changePage

}